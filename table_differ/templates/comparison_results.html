{% extends "base.html" %}

{% block title %}Table Comparison Results{% endblock %}

{% block head %}
<script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery.handsontable.full.js') }}"></script>
<link rel="stylesheet" media="screen" href="{{ url_for('static', filename='css/jquery.handsontable.full.css') }}">
<script src="http://handsontable.com/lib/jquery-ui/js/jquery-ui.custom.min.js"></script>
<script type="text/javascript">
  var result_grid_data_url = "{{ url_for('results.view_results_grid_data', comparison_id=comparison_id) }}"
  var update_result_grid_data_url = "{{ url_for('results.update_results_grid_data', comparison_id=comparison_id) }}";
  var comparison_id = "{{ comparison_id }}";
</script>
{% endblock %}

{% block page_content %}
<div class="container-fluid" id="page-content">
	<div class="form-box span10 offset1">
    <div class="form-legend">Comparison Results</div>

    <div class="bs-docs-example">
      <ul id="myTab" class="nav nav-pills">
        <li><a href="#summary" data-toggle="tab">Summary</a></li>
        <li><a href="#thumbnail" data-toggle="tab">Overview</a></li>
        <li><a href="#results" data-toggle="tab">Table</a></li>
        <li class="active"><a href="#results-panel" data-toggle="tab">Grid</a></li>
      </ul>

      <div id="myTabContent" class="tab-content">
        <div class="tab-pane fade" id="summary">
          <ul>
              {% for report_note in report_notes %}
                <li>{{ report_note }}</li>
              {% endfor %}
          </ul>
        </div>
        <div class="tab-pane fade" id="results">
          <table border="1">
            {% if options.show_row_col_labels %}
              <tr>
                  <td/>
                  {% for cell in table_rows[0] %}
                  <td>{{ loop.index }}</td>
                  {% endfor %}
              </tr>
            {% endif %}

            {% for row in table_rows %}
              <tr>
                {% if options.show_row_col_labels %}
                  <td>{{ loop.index }}</td>
                {% endif %}

                {% for cell in row %}
                  <td class="{{ cell[1] }}">
                    {{ cell[0] }}
                  </td>
                {% endfor %}
              </tr>
            {% endfor %}
          </table>
        </div>
        <div class="tab-pane fade" id="thumbnail">
          <ul>
            <img src="{{ url_for('results.thumbnails', comparison_id=comparison_id) }}"/>
          </ul>
        </div>
        <div class="tab-pane fade in active" id="results-panel">
          <div class="control-group">
            <a href="{{ url_for('baselines.view_baseline', baseline_id=baseline_id) }}">Edit baseline</a>
          </div>
					<div class="controls">
            <div id="results-grid" class="handsontable"></div>
					</div>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="{{ url_for('static', filename='js/comparison_results.js') }}"></script>
{% endblock %}

